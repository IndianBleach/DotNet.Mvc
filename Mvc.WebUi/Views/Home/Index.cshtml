@using Mvc.WebUi.ViewModels;
@model HomeIdeasViewModel;

@{
    ViewData["Title"] = "Home Page";
    Layout = "_Layout";
}


 <div class="container d-flex">
      <div class="col-9">
        <main>
          <div class="col-12">
            <header>
              <div class="position-relative col-12">
                <div id="topHeaderBackground" class="z-minus position-absolute">
                  <div
                    style="opacity: 0.8;"
                    class="z-minus col-12 justify-content-end d-flex"
                  >
                    <img class="z-minus col-9" src="./backPizza.png" />
                  </div>
                </div>
              </div>
              <div class="col-12 z-1 mt-3">
                <div class="p-3">
                  <div class="mb-4">
                    <h1 class="z-1 t-lg t-bold text-white">Popular ideas</h1>
                  </div>
                  <div>
                    <form asp-action="index" asp-controller="home" class="shadow form-dark form-lg col-6">
                      <div class="col">
                        <input
                            name="query"
                          class="t-semi-bold form-control me-0 pe-1"
                          type="search"
                          placeholder="Search any idea"
                          aria-label="Search"
                        />
                      </div>
                      <button class="btn t-muted" type="submit">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-search"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
                          />
                        </svg>
                      </button>
                    </form>
                  </div>
                  <div class="col-10 mt-3 d-flex flex-wrap">
                    @foreach(var tag in Model.SearchTags)
                    {
                        <div style="height: 33px;" class="me-1">
                            <a asp-action="index" asp-route-query="@tag.Name" class="t-tag">@tag.Name</a>
                        </div>
                    }                    
                  </div>
                </div>
              </div>
            </header>
            <div class="col-12 mt-1 ps-3 pe-3">
              @foreach(var idea in Model.Ideas)
              {
              <section>
                <div class="col-12 mb-3">
                  <div
                    style="
                      background: linear-gradient(
                          0deg,
                          rgba(0, 0, 0, 0.33),
                          rgba(0, 0, 0, 0.33)
                        ),
                        url('media/ideaAvatars/@idea.AvatarImageName');
                      border-radius: 6px;
                    "
                    class="d-flex align-items-end idea-post bg-light"
                  >
                    <div class="pb-4 ps-4 pe-4 text-break col-12">
                      <div style="margin-bottom: 86px;" class="text-break">
                        <content>
                          <a asp-controller="idea" asp-action="@idea.Guid" asp- class="h1 t-xbold text-white t-shadow"
                            >@idea.Title</a
                          >
                          <p
                            class="col-10 t-bold t-muted t-shadow d-inline-block text-truncate"
                          >
                            @idea.Description
                          </p>
                        </content>
                      </div>
                      <div class="d-flex">
                        <div class="me-2 icon-link border">
                          <a class="t-muted t-semi-bold t-md">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="21"
                              height="21"
                              fill="currentColor"
                              class="bi bi-chat"
                              viewBox="0 0 16 16"
                            >
                              <path
                                d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"
                              />
                            </svg>
                            @idea.TotalCommentsCount
                          </a>
                        </div>
                        <div class="me-2 icon-link border">
                          <a class="t-muted t-semi-bold t-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-boxes" viewBox="0 0 16 16">
                              <path d="M7.752.066a.5.5 0 0 1 .496 0l3.75 2.143a.5.5 0 0 1 .252.434v3.995l3.498 2A.5.5 0 0 1 16 9.07v4.286a.5.5 0 0 1-.252.434l-3.75 2.143a.5.5 0 0 1-.496 0l-3.502-2-3.502 2.001a.5.5 0 0 1-.496 0l-3.75-2.143A.5.5 0 0 1 0 13.357V9.071a.5.5 0 0 1 .252-.434L3.75 6.638V2.643a.5.5 0 0 1 .252-.434L7.752.066ZM4.25 7.504 1.508 9.071l2.742 1.567 2.742-1.567L4.25 7.504ZM7.5 9.933l-2.75 1.571v3.134l2.75-1.571V9.933Zm1 3.134 2.75 1.571v-3.134L8.5 9.933v3.134Zm.508-3.996 2.742 1.567 2.742-1.567-2.742-1.567-2.742 1.567Zm2.242-2.433V3.504L8.5 5.076V8.21l2.75-1.572ZM7.5 8.21V5.076L4.75 3.504v3.134L7.5 8.21ZM5.258 2.643 8 4.21l2.742-1.567L8 1.076 5.258 2.643ZM15 9.933l-2.75 1.571v3.134L15 13.067V9.933ZM3.75 14.638v-3.134L1 9.933v3.134l2.75 1.571Z"/>
                            </svg>
                            @idea.TotalBoxCount
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="mt-2 d-flex flex-wrap">
                    @foreach(var tag in idea.Tags)
                    {
                        <div class="t-tag me-1">
                          <a class="t-primary">@tag.Name</a>
                        </div>
                    }
                  </div>
                </div>
              </section>
              }

              <div class="d-flex">
                @foreach(var pageInfo in Model.Pages)
                {
                    <div class="me-1">
                        @if (pageInfo.IsActive)
                        {
                            <a disabled asp-action="index" asp-route-page="@pageInfo.NumberValue" class="disabled btn text-muted t-md t-semi-bold border">
                                @pageInfo.NumberValue
                            </a>
                        }
                        else
                        {
                            <a asp-action="index" asp-route-page="@pageInfo.NumberValue" class=" text-white btn t-md t-semi-bold border">
                                @pageInfo.NumberValue
                            </a>                    
                        }
                    </div>
                }
                
              </div>
            </div>
          </div>
        </main>
      </div>
      <div class="ps-3 pt-4 col">
        <aside>
          <div class="col-12 pt-2">
            <h3 class="t-lg t-bold t-muted">Recommend</h3>
            <div class="ps-1 col-12 text-break">
              @foreach(var recommend in Model.Recommends)
              {
                <div class="mt-2 col-12 d-flex align-items-center">
                <a>
                  <img
                    src="~/media/userAvatars/@recommend.UserAvatarImageName"
                    height="33"
                    width="33"
                    class="circle shadow"
                  />
                </a>
                <div class="ps-2">
                  <a class="t-semi-bold text-white t-md">@recommend.AuthorName</a>
                  <br />
                  <a class="t-bold t-primary t-md">@recommend.IdeaTitle</a>
                </div>
              </div>
              }              
            </div>
          </div>
          <div class="col-12 pt-2 mt-4">
            <h3 class="t-lg t-bold t-muted">Need members</h3>
            <div style="max-width: 180px;" class="ps-1 pt-3 d-flex flex-wrap">
              @foreach(var sideIdea in Model.IdeasNeedMembers)
              {
                <div class="rotate-idea-card-wrap position-relative">
                <a href="./">
                  <div class="shadow position-absolute rotate-idea-card">
                    <img src="~/media/ideaAvatars/@sideIdea.AvatarImageName" />
                  </div>
                </a>
                </div>
              }
            </div>
          </div>
          <div class="col-12 pt-2 mt-5">
            <h3 class="t-lg t-bold t-muted">Have new idea?</h3>
            <div class="ps-1 pt-2">
              <a class="icon-link-btn">Create</a>
            </div>
          </div>
        </aside>
      </div>
    </div>

